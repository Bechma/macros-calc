import{a as b,p as s,R as X,w as Z}from"./chunk-B7RQU5TL-CLJ2pTrm.js";import{S as K,l as P,q as y,t as E,r as S,d as W,u as z,v as U,w as q,x as O,g as ee,y as te,z as L,n as F,A as se,B as ie,C as ae}from"./QueryClientProvider-BMarivHf.js";var V=class extends K{constructor(e,t){super(),this.options=t,this.#s=e,this.#n=null,this.#r=P(),this.bindMethods(),this.setOptions(t)}#s;#e=void 0;#h=void 0;#t=void 0;#i;#a;#r;#n;#m;#d;#u;#c;#l;#o;#g=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#e.addObserver(this),D(this.#e,this.options)?this.#f():this.updateResult(),this.#x())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return T(this.#e,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return T(this.#e,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#y(),this.#_(),this.#e.removeObserver(this)}setOptions(e){const t=this.options,i=this.#e;if(this.options=this.#s.defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof y(this.options.enabled,this.#e)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#j(),this.#e.setOptions(this.options),t._defaulted&&!E(this.options,t)&&this.#s.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#e,observer:this});const a=this.hasListeners();a&&A(this.#e,i,this.options,t)&&this.#f(),this.updateResult(),a&&(this.#e!==i||y(this.options.enabled,this.#e)!==y(t.enabled,this.#e)||S(this.options.staleTime,this.#e)!==S(t.staleTime,this.#e))&&this.#p();const r=this.#b();a&&(this.#e!==i||y(this.options.enabled,this.#e)!==y(t.enabled,this.#e)||r!==this.#o)&&this.#v(r)}getOptimisticResult(e){const t=this.#s.getQueryCache().build(this.#s,e),i=this.createResult(t,e);return ne(this,i)&&(this.#t=i,this.#a=this.options,this.#i=this.#e.state),i}getCurrentResult(){return this.#t}trackResult(e,t){return new Proxy(e,{get:(i,a)=>(this.trackProp(a),t?.(a),a==="promise"&&!this.options.experimental_prefetchInRender&&this.#r.status==="pending"&&this.#r.reject(new Error("experimental_prefetchInRender feature flag is not enabled")),Reflect.get(i,a))})}trackProp(e){this.#g.add(e)}getCurrentQuery(){return this.#e}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=this.#s.defaultQueryOptions(e),i=this.#s.getQueryCache().build(this.#s,t);return i.fetch().then(()=>this.createResult(i,t))}fetch(e){return this.#f({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#t))}#f(e){this.#j();let t=this.#e.fetch(this.options,e);return e?.throwOnError||(t=t.catch(W)),t}#p(){this.#y();const e=S(this.options.staleTime,this.#e);if(z||this.#t.isStale||!U(e))return;const i=q(this.#t.dataUpdatedAt,e)+1;this.#c=O.setTimeout(()=>{this.#t.isStale||this.updateResult()},i)}#b(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#e):this.options.refetchInterval)??!1}#v(e){this.#_(),this.#o=e,!(z||y(this.options.enabled,this.#e)===!1||!U(this.#o)||this.#o===0)&&(this.#l=O.setInterval(()=>{(this.options.refetchIntervalInBackground||ee.isFocused())&&this.#f()},this.#o))}#x(){this.#p(),this.#v(this.#b())}#y(){this.#c&&(O.clearTimeout(this.#c),this.#c=void 0)}#_(){this.#l&&(O.clearInterval(this.#l),this.#l=void 0)}createResult(e,t){const i=this.#e,a=this.options,r=this.#t,n=this.#i,c=this.#a,h=e!==i?e.state:this.#h,{state:m}=e;let o={...m},f=!1,u;if(t._optimisticResults){const v=this.hasListeners(),w=!v&&D(e,t),R=v&&A(e,i,t,a);(w||R)&&(o={...o,...te(m.data,e.options)}),t._optimisticResults==="isRestoring"&&(o.fetchStatus="idle")}let{error:j,errorUpdatedAt:g,status:d}=o;u=o.data;let x=!1;if(t.placeholderData!==void 0&&u===void 0&&d==="pending"){let v;r?.isPlaceholderData&&t.placeholderData===c?.placeholderData?(v=r.data,x=!0):v=typeof t.placeholderData=="function"?t.placeholderData(this.#u?.state.data,this.#u):t.placeholderData,v!==void 0&&(d="success",u=L(r?.data,v,t),f=!0)}if(t.select&&u!==void 0&&!x)if(r&&u===n?.data&&t.select===this.#m)u=this.#d;else try{this.#m=t.select,u=t.select(u),u=L(r?.data,u,t),this.#d=u,this.#n=null}catch(v){this.#n=v}this.#n&&(j=this.#n,u=this.#d,g=Date.now(),d="error");const p=o.fetchStatus==="fetching",N=d==="pending",M=d==="error",Q=N&&p,k=u!==void 0,_={status:d,fetchStatus:o.fetchStatus,isPending:N,isSuccess:d==="success",isError:M,isInitialLoading:Q,isLoading:Q,data:u,dataUpdatedAt:o.dataUpdatedAt,error:j,errorUpdatedAt:g,failureCount:o.fetchFailureCount,failureReason:o.fetchFailureReason,errorUpdateCount:o.errorUpdateCount,isFetched:o.dataUpdateCount>0||o.errorUpdateCount>0,isFetchedAfterMount:o.dataUpdateCount>h.dataUpdateCount||o.errorUpdateCount>h.errorUpdateCount,isFetching:p,isRefetching:p&&!N,isLoadingError:M&&!k,isPaused:o.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:M&&k,isStale:I(e,t),refetch:this.refetch,promise:this.#r,isEnabled:y(t.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const v=C=>{_.status==="error"?C.reject(_.error):_.data!==void 0&&C.resolve(_.data)},w=()=>{const C=this.#r=_.promise=P();v(C)},R=this.#r;switch(R.status){case"pending":e.queryHash===i.queryHash&&v(R);break;case"fulfilled":(_.status==="error"||_.data!==R.value)&&w();break;case"rejected":(_.status!=="error"||_.error!==R.reason)&&w();break}}return _}updateResult(){const e=this.#t,t=this.createResult(this.#e,this.options);if(this.#i=this.#e.state,this.#a=this.options,this.#i.data!==void 0&&(this.#u=this.#e),E(t,e))return;this.#t=t;const i=()=>{if(!e)return!0;const{notifyOnChangeProps:a}=this.options,r=typeof a=="function"?a():a;if(r==="all"||!r&&!this.#g.size)return!0;const n=new Set(r??this.#g);return this.options.throwOnError&&n.add("error"),Object.keys(this.#t).some(c=>{const l=c;return this.#t[l]!==e[l]&&n.has(l)})};this.#N({listeners:i()})}#j(){const e=this.#s.getQueryCache().build(this.#s,this.options);if(e===this.#e)return;const t=this.#e;this.#e=e,this.#h=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#x()}#N(e){F.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(this.#t)}),this.#s.getQueryCache().notify({query:this.#e,type:"observerResultsUpdated"})})}};function re(e,t){return y(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function D(e,t){return re(e,t)||e.state.data!==void 0&&T(e,t,t.refetchOnMount)}function T(e,t,i){if(y(t.enabled,e)!==!1&&S(t.staleTime,e)!=="static"){const a=typeof i=="function"?i(e):i;return a==="always"||a!==!1&&I(e,t)}return!1}function A(e,t,i,a){return(e!==t||y(a.enabled,e)===!1)&&(!i.suspense||e.state.status!=="error")&&I(e,i)}function I(e,t){return y(t.enabled,e)!==!1&&e.isStaleByTime(S(t.staleTime,e))}function ne(e,t){return!E(e.getCurrentResult(),t)}function $(e,t){const i=new Set(t);return e.filter(a=>!i.has(a))}function oe(e,t,i){const a=e.slice(0);return a[t]=i,a}var ce=class extends K{#s;#e;#h;#t;#i;#a;#r;#n;#m=[];constructor(e,t,i){super(),this.#s=e,this.#t=i,this.#h=[],this.#i=[],this.#e=[],this.setQueries(t)}onSubscribe(){this.listeners.size===1&&this.#i.forEach(e=>{e.subscribe(t=>{this.#l(e,t)})})}onUnsubscribe(){this.listeners.size||this.destroy()}destroy(){this.listeners=new Set,this.#i.forEach(e=>{e.destroy()})}setQueries(e,t){this.#h=e,this.#t=t,F.batch(()=>{const i=this.#i,a=this.#c(this.#h);this.#m=a,a.forEach(o=>o.observer.setOptions(o.defaultedQueryOptions));const r=a.map(o=>o.observer),n=r.map(o=>o.getCurrentResult()),c=i.length!==r.length,l=r.some((o,f)=>o!==i[f]),h=c||l,m=h?!0:n.some((o,f)=>{const u=this.#e[f];return!u||!E(o,u)});!h&&!m||(h&&(this.#i=r),this.#e=n,this.hasListeners()&&(h&&($(i,r).forEach(o=>{o.destroy()}),$(r,i).forEach(o=>{o.subscribe(f=>{this.#l(o,f)})})),this.#o()))})}getCurrentResult(){return this.#e}getQueries(){return this.#i.map(e=>e.getCurrentQuery())}getObservers(){return this.#i}getOptimisticResult(e,t){const i=this.#c(e),a=i.map(r=>r.observer.getOptimisticResult(r.defaultedQueryOptions));return[a,r=>this.#u(r??a,t),()=>this.#d(a,i)]}#d(e,t){return t.map((i,a)=>{const r=e[a];return i.defaultedQueryOptions.notifyOnChangeProps?r:i.observer.trackResult(r,n=>{t.forEach(c=>{c.observer.trackProp(n)})})})}#u(e,t){return t?((!this.#a||this.#e!==this.#n||t!==this.#r)&&(this.#r=t,this.#n=this.#e,this.#a=se(this.#a,t(e))),this.#a):e}#c(e){const t=new Map(this.#i.map(a=>[a.options.queryHash,a])),i=[];return e.forEach(a=>{const r=this.#s.defaultQueryOptions(a),n=t.get(r.queryHash);n?i.push({defaultedQueryOptions:r,observer:n}):i.push({defaultedQueryOptions:r,observer:new V(this.#s,r)})}),i}#l(e,t){const i=this.#i.indexOf(e);i!==-1&&(this.#e=oe(this.#e,i,t),this.#o())}#o(){if(this.hasListeners()){const e=this.#a,t=this.#d(this.#e,this.#m),i=this.#u(t,this.#t?.combine);e!==i&&F.batch(()=>{this.listeners.forEach(a=>{a(this.#e)})})}}},Y=b.createContext(!1),le=()=>b.useContext(Y);Y.Provider;function he(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var de=b.createContext(he()),ue=()=>b.useContext(de),me=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},fe=e=>{b.useEffect(()=>{e.clearReset()},[e])},ge=({result:e,errorResetBoundary:t,throwOnError:i,query:a,suspense:r})=>e.isError&&!t.isReset()&&!e.isFetching&&a&&(r&&e.data===void 0||ie(i,[e.error,a])),pe=e=>{if(e.suspense){const i=r=>r==="static"?r:Math.max(r??1e3,1e3),a=e.staleTime;e.staleTime=typeof a=="function"?(...r)=>i(a(...r)):i(a),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},be=(e,t)=>e.isLoading&&e.isFetching&&!t,H=(e,t)=>e?.suspense&&t.isPending,B=(e,t,i)=>t.fetchOptimistic(e).catch(()=>{i.clearReset()});function ve({queries:e,...t},i){const a=ae(),r=le(),n=ue(),c=b.useMemo(()=>e.map(d=>{const x=a.defaultQueryOptions(d);return x._optimisticResults=r?"isRestoring":"optimistic",x}),[e,a,r]);c.forEach(d=>{pe(d),me(d,n)}),fe(n);const[l]=b.useState(()=>new ce(a,c,t)),[h,m,o]=l.getOptimisticResult(c,t.combine),f=!r&&t.subscribed!==!1;b.useSyncExternalStore(b.useCallback(d=>f?l.subscribe(F.batchCalls(d)):W,[l,f]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),b.useEffect(()=>{l.setQueries(c,t)},[c,t,l]);const j=h.some((d,x)=>H(c[x],d))?h.flatMap((d,x)=>{const p=c[x];if(p){const N=new V(a,p);if(H(p,d))return B(p,N,n);be(d,r)&&B(p,N,n)}return[]}):[];if(j.length>0)throw Promise.all(j);const g=h.find((d,x)=>{const p=c[x];return p&&ge({result:d,errorResetBoundary:n,throwOnError:p.throwOnError,query:a.getQueryCache().get(p.queryHash),suspense:p.suspense})});if(g?.error)throw g.error;return m(o())}function xe({foods:e,onQuantityChange:t,onRemove:i}){return e.length===0?s.jsx("div",{className:"has-text-centered py-6",children:s.jsx("p",{className:"has-text-grey",children:"No foods added yet"})}):s.jsx("div",{className:"content",children:e.map(({food:a,quantity:r,id:n})=>s.jsxs("div",{className:"box",children:[s.jsxs("div",{className:"is-flex is-justify-content-space-between is-align-items-center",children:[s.jsxs("div",{className:"is-flex is-align-items-center",children:[a.image&&s.jsx("figure",{className:"image is-square is-32x32",children:s.jsx("img",{src:a.image,alt:a.name})}),s.jsx("p",{className:"title is-5",children:a.name})]}),s.jsxs("div",{className:"is-flex is-align-items-center",children:[s.jsx("div",{className:"field has-addons",children:s.jsxs("div",{className:"control is-expanded has-icons-right",children:[s.jsx("input",{id:n,className:"input",type:"tel",min:"1",value:r,onChange:c=>{Number(c.target.value)>0&&t(n,Number(c.target.value))}}),s.jsx("span",{className:"icon is-small is-right has-text-grey is-size-8",children:"g"})]})}),s.jsx("button",{className:"delete is-large",onClick:()=>i(n),"aria-label":"Remove food",type:"button"})]})]}),s.jsxs("div",{className:"columns is-mobile has-text-centered mt-3",children:[s.jsxs("div",{className:"column",children:[s.jsx("div",{className:"has-text-grey is-size-8",children:"Calories"}),s.jsx("div",{className:"has-text-weight-bold",children:Math.round((a.nutrition.calories||0)*(r/100))})]}),s.jsxs("div",{className:"column",children:[s.jsx("div",{className:"has-text-grey is-size-8",children:"Protein"}),s.jsxs("div",{className:"has-text-weight-bold",children:[((a.nutrition.protein||0)*(r/100)).toFixed(1),"g"]})]}),s.jsxs("div",{className:"column",children:[s.jsx("div",{className:"has-text-grey is-size-8",children:"Carbs"}),s.jsxs("div",{className:"has-text-weight-bold",children:[((a.nutrition.carbohydrates||0)*(r/100)).toFixed(1),"g"]})]}),s.jsxs("div",{className:"column",children:[s.jsx("div",{className:"has-text-grey is-size-8",children:"Fat"}),s.jsxs("div",{className:"has-text-weight-bold",children:[((a.nutrition.total_fat||0)*(r/100)).toFixed(1),"g"]})]})]})]},n))})}function ye({foods:e}){const t=e.reduce((i,{food:a,quantity:r})=>{const n=r/100;return{calories:i.calories+(a.nutrition.calories||0)*n,protein:i.protein+(a.nutrition.protein||0)*n,carbohydrates:i.carbohydrates+(a.nutrition.carbohydrates||0)*n,fat:i.fat+(a.nutrition.total_fat||0)*n}},{calories:0,protein:0,carbohydrates:0,fat:0});return s.jsxs("div",{className:"box",children:[s.jsx("h3",{className:"title is-5 mb-4",children:"Nutrition Summary"}),s.jsxs("div",{className:"columns is-mobile has-text-centered",children:[s.jsxs("div",{className:"column",children:[s.jsx("div",{className:"has-text-grey is-size-8",children:"Total Calories"}),s.jsx("div",{className:"has-text-weight-bold is-size-4",children:Math.round(t.calories)})]}),s.jsxs("div",{className:"column",children:[s.jsx("div",{className:"has-text-grey is-size-8",children:"Protein"}),s.jsxs("div",{className:"has-text-weight-bold is-size-4",children:[t.protein.toFixed(1),"g"]})]}),s.jsxs("div",{className:"column",children:[s.jsx("div",{className:"has-text-grey is-size-8",children:"Carbs"}),s.jsxs("div",{className:"has-text-weight-bold is-size-4",children:[t.carbohydrates.toFixed(1),"g"]})]}),s.jsxs("div",{className:"column",children:[s.jsx("div",{className:"has-text-grey is-size-8",children:"Fat"}),s.jsxs("div",{className:"has-text-weight-bold is-size-4",children:[t.fat.toFixed(1),"g"]})]})]})]})}const G={staleTime:3600*1e3,retry:2,retryDelay:1e3},J=20,_e=e=>({...G,queryKey:["search","openfoodfacts",e],queryFn:async()=>{if(!e)return null;const t=await fetch(`https://world.openfoodfacts.org/cgi/search.pl?search_terms=${encodeURIComponent(e)}&page_size=${J}&page=1&search_simple=1&action=process&json=1`);if(!t.ok)throw new Error("Failed to fetch food data");return t.json()},select:t=>t?.products?.map(i=>({id:i._id,name:i.abbreviated_product_name||i.product_name,image:i.image_url,nutrition:je(i)}))||[],enabled:!!e});function je(e){const t={},i={...e.nutriments_estimated||{},...e.nutriments};if(Re.forEach(([a,r])=>{const n=i[r];typeof n=="number"&&(t[a]=n)}),t.calories===void 0){if(i["energy-kcal_100g"]!==void 0)t.calories=Number(i["energy-kcal_100g"]);else if(i.energy_100g!==void 0){const a=Number(i.energy_100g);Number.isNaN(a)||(t.calories=a/4.184)}}if(t.other_carbohydrates===void 0&&typeof t.carbohydrates=="number"&&typeof t.dietary_fiber=="number"&&typeof t.total_sugars=="number"&&typeof t.sugar_alcohols=="number"){const a=t.carbohydrates-(t.dietary_fiber+t.total_sugars+(t.sugar_alcohols||0));a>=0&&(t.other_carbohydrates=a)}return t}const Ne={calories:"energy-kcal_100g",protein:"proteins_100g",total_fat:"fat_100g",carbohydrates:"carbohydrates_100g",saturated_fats:"saturated-fat_100g",monounsaturated_fats:"monounsaturated-fat_100g",polyunsaturated_fats:"polyunsaturated-fat_100g",dietary_fiber:"fiber_100g",total_sugars:"sugars_100g",added_sugars:"added-sugars_100g",other_carbohydrates:"carbohydrates_100g",omega_3:"omega-3_100g",alpha_linolenic_acid:"alpha-linolenic-acid_100g",omega_6:"omega-6_100g",linoleic_acid:"linoleic-acid_100g",oleic_acid:"oleic-acid_100g",palmitic_acid:"palmitic-acid_100g",stearic_acid:"stearic-acid_100g",myristic_acid:"myristic-acid_100g",gamma_linolenic_acid:"gamma-linolenic-acid_100g",dihomo_gamma_linolenic_acid:"dihomo-gamma-linolenic-acid_100g",omega_9:"omega-9_100g",vitamin_a:"vitamin-a_100g",thiamin:"vitamin-b1_100g",riboflavin:"vitamin-b2_100g",niacin:"vitamin-pp_100g",pantothenic_acid:"pantothenic-acid_100g",vitamin_b6:"vitamin-b6_100g",vitamin_b12:"vitamin-b12_100g",vitamin_c:"vitamin-c_100g",vitamin_d:"vitamin-d_100g",vitamin_e:"vitamin-e_100g",vitamin_k:"vitamin-k_100g",biotin:"biotin_100g",folate_dfe:"folate_100g",calcium:"calcium_100g",iron:"iron_100g",magnesium:"magnesium_100g",phosphorus:"phosphorus_100g",potassium:"potassium_100g",sodium:"sodium_100g",zinc:"zinc_100g",copper:"copper_100g",manganese:"manganese_100g",selenium:"selenium_100g",molybdenum:"molybdenum_100g",iodine:"iodine_100g",chromium:"chromium_100g",chlorine:"chlorine_100g",tryptophan:"tryptophan_100g",threonine:"threonine_100g",isoleucine:"isoleucine_100g",leucine:"leucine_100g",lysine:"lysine_100g",methionine:"methionine_100g",phenylalanine:"phenylalanine_100g",valine:"valine_100g",histidine:"histidine_100g",alanine:"alanine_100g",arginine:"arginine_100g",aspartic_acid:"aspartic-acid_100g",cysteine:"cysteine_100g",cystine:"cystine_100g",glutamic_acid:"glutamic-acid_100g",glycine:"glycine_100g",proline:"proline_100g",serine:"serine_100g",tyrosine:"tyrosine_100g",choline:"choline_100g",water:"water_100g",sugar_alcohols:"sugar-alcohols_100g"},Re=Object.entries(Ne),Se=e=>({...G,queryKey:["search","opennutrition",e],queryFn:async()=>{if(!e)return null;const t=await fetch(`https://search.opennutrition.app/foods?q=${encodeURIComponent(e)}&limit=${J}&offset=0&facets=true`);if(!t.ok)throw new Error("Failed to fetch food data");return t.json()},select:t=>t?.foods?.map(i=>({...i,image:i.image.key?`https://drd3kry2ubqnc.cloudfront.net/${i.image.key}@4x.webp`:void 0}))||[],enabled:!!e});function we(e){return ve({queries:[_e(e),Se(e)],combine:t=>{const i=t.map(n=>n.data||[]),a=Math.max(...i.map(n=>n.length));return{data:Array.from({length:a},(n,c)=>i.map(l=>l[c]).filter(l=>l!==void 0)).flat(),error:t.find(n=>n.error),isError:t.some(n=>n.isError),isLoading:t.some(n=>n.isLoading),isFetching:t.some(n=>n.isFetching)}}})}function Ce(e,t){const[i,a]=b.useState(e);return b.useEffect(()=>{const r=setTimeout(()=>{a(e)},t);return()=>{clearTimeout(r)}},[e,t]),i}function Oe({food:e,onAdd:t}){const{name:i,image:a,nutrition:r}=e,{protein:n=0,carbohydrates:c=0,total_fat:l=0}=r,h=Math.round((n+c)*4+l*9)||0;return s.jsx("div",{className:"card mb-4",children:s.jsx("div",{className:"card-content",children:s.jsxs("div",{className:"media",children:[a&&s.jsx("div",{className:"media-left",children:s.jsx("figure",{className:"image is-64x64",children:s.jsx("img",{src:a,alt:i})})}),s.jsxs("div",{className:"media-content",children:[s.jsxs("div",{className:"is-flex is-align-items-baseline is-justify-content-space-between mb-2",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"title is-4 mr-2",children:i}),s.jsxs("span",{className:"subtitle is-6 has-text-grey mr-2",children:[h," kcal per serving"]})]}),t&&s.jsxs("button",{type:"button",className:"button is-primary is-small",onClick:()=>t(e),children:[s.jsx("i",{className:"fas fa-plus mr-1"}),"Add"]})]}),s.jsx("div",{className:"content mt-5",children:s.jsxs("div",{className:"columns is-mobile has-text-centered",children:[s.jsxs("div",{className:"column",children:[s.jsx("div",{className:"has-text-grey is-size-8",children:"Protein"}),s.jsxs("div",{className:"has-text-weight-bold",children:[n,"g"]})]}),s.jsxs("div",{className:"column",children:[s.jsx("div",{className:"has-text-grey is-size-8",children:"Carbs"}),s.jsxs("div",{className:"has-text-weight-bold",children:[c,"g"]})]}),s.jsxs("div",{className:"column",children:[s.jsx("div",{className:"has-text-grey is-size-8",children:"Fat"}),s.jsxs("div",{className:"has-text-weight-bold",children:[l,"g"]})]}),s.jsxs("div",{className:"column",children:[s.jsx("div",{className:"has-text-grey is-size-8",children:"Calories"}),s.jsx("div",{className:"has-text-weight-bold",children:h})]})]})})]})]})})})}function Ee({isOpen:e,onClose:t,onAddFood:i}){const[a,r]=X.useState(""),n=a.trim(),c=Ce(n,300),{data:l,error:h,isError:m,isLoading:o,isFetching:f}=we(c),u=g=>{i(g),t()},j=()=>m?s.jsxs("div",{className:"notification is-danger",children:[s.jsx("button",{type:"button",className:"delete",onClick:()=>window.location.reload()}),s.jsx("p",{children:"Error loading food data. Please try again."}),h instanceof Error&&s.jsxs("p",{className:"is-size-7",children:["Error: ",h.message]})]}):o||f?s.jsx("div",{className:"has-text-centered",children:s.jsx("button",{type:"button",className:"button is-loading is-large",children:"Loading..."})}):l?.length?l.map(g=>s.jsx(Oe,{food:g,onAdd:u},g.id)):n?s.jsx("div",{className:"has-text-centered",children:s.jsxs("p",{className:"subtitle",children:['No results found for "',n,'"']})}):s.jsx("div",{className:"has-text-centered",children:s.jsx("p",{className:"subtitle",children:"Search for food to see nutritional information"})});return e?s.jsxs("div",{className:"modal is-active",children:[s.jsx("div",{className:"modal-background",onClick:t,onKeyDown:g=>g.key==="Escape"&&t(),role:"button",tabIndex:0,"aria-label":"Close modal"}),s.jsxs("div",{className:"modal-card",style:{width:"90vw",maxWidth:"800px"},children:[s.jsxs("header",{className:"modal-card-head",children:[s.jsx("p",{className:"modal-card-title",children:"Search for a Food"}),s.jsx("button",{type:"button",className:"delete","aria-label":"close",onClick:t})]}),s.jsxs("section",{className:"modal-card-body",children:[s.jsxs("div",{className:"field",children:[s.jsxs("div",{className:"control has-icons-left has-icons-right",children:[s.jsx("input",{className:`input is-large ${m?"is-danger":""}`,type:"text",placeholder:"Search for food...",value:a,onChange:g=>r(g.target.value),"aria-busy":o,"aria-invalid":m}),s.jsx("span",{className:"icon is-left",children:s.jsx("i",{className:`fas ${m?"fa-exclamation-triangle":"fa-search"}`})}),(o||f)&&s.jsx("span",{className:"icon is-right",children:s.jsx("i",{className:"fas fa-spinner fa-spin"})})]}),m&&s.jsx("p",{className:"help is-danger",children:"There was an error with your search. Please try again."})]}),s.jsx("div",{style:{maxHeight:"60vh",overflowY:"auto"},children:j()})]})]})]}):null}const Ie=()=>[{title:"Macros Calculator"}],Qe=Z(function(){const[t,i]=b.useState([]),[a,r]=b.useState(!1),n=h=>{i(m=>[...m,{id:`${h.id}-${Date.now()}`,food:h,quantity:100}])},c=h=>{i(m=>m.filter(o=>o.id!==h))},l=(h,m)=>{i(o=>o.map(f=>f.id===h?{...f,quantity:Math.max(1,m)}:f))};return s.jsxs("div",{className:"py-6",children:[s.jsx("div",{className:"columns is-centered",children:s.jsxs("div",{className:"column is-8",children:[s.jsxs("div",{className:"is-flex is-justify-content-space-between is-align-items-center mb-5",children:[s.jsx("h1",{className:"title",children:"Macros Calculator"}),s.jsxs("button",{type:"button",className:"button is-primary",onClick:()=>r(!0),children:[s.jsx("i",{className:"fas fa-plus mr-2"}),"Add Food"]})]}),s.jsx("div",{className:"mb-5",children:s.jsx(ye,{foods:t})}),s.jsxs("div",{className:"box",children:[s.jsxs("h2",{className:"title is-4 mb-4",children:[s.jsx("i",{className:"fas fa-list mr-2"}),"Selected Foods"]}),s.jsx(xe,{foods:t,onQuantityChange:l,onRemove:c})]})]})}),s.jsx(Ee,{isOpen:a,onClose:()=>r(!1),onAddFood:n})]})});export{Qe as default,Ie as meta};
